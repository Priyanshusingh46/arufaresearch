"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const help_printer_1 = require("../internal/cli/help-printer");
const config_env_1 = require("../internal/core/config/config-env");
const polar_params_1 = require("../internal/core/params/polar-params");
const packageInfo_1 = require("../internal/util/packageInfo");
const task_names_1 = require("./task-names");
const POLAR_NAME = "polar";
function default_1() {
    (0, config_env_1.task)(task_names_1.TASK_HELP, "Prints this message")
        .addOptionalPositionalParam("task", "An optional task to print more info about")
        .setAction(help);
}
exports.default = default_1;
async function help({ task: taskName }, env) {
    const packageJson = await (0, packageInfo_1.getPackageJson)();
    const helpPrinter = new help_printer_1.HelpPrinter(POLAR_NAME, packageJson.version, polar_params_1.POLAR_PARAM_DEFINITIONS, env.tasks);
    if (taskName !== undefined) {
        helpPrinter.printTaskHelp(taskName);
        return;
    }
    helpPrinter.printGlobalHelp();
}
